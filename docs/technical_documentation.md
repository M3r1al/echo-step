Национальный исследовательский ядерный университет
«МИФИ»
Кафедра «Программная инженерия»
Техническая документация
к игре «Echo Step»
Версия: 1.0
Дата: 13.11.2025
Москва 2025
Техническая документация Версия 1.0
Содержание
1 Введение 2
1.1 Общее описание . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
1.2 Цели документации . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
1.3 Область применения . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
2 Архитектура системы 2
2.1 Общая структура . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
2.2 Основные компоненты . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2
2.3 Диаграмма взаимодействия . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
3 Физическая модель 3
3.1 Основные параметры . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
3.2 Модель движения . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
4 Отладочная система 3
4.1 Архитектура . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3
4.2 Алгоритм переключения уровней . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
5 Процедуры тестирования 4
5.1 Функциональное тестирование . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4
5.2 Стресс-тестирование . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
6 Оптимизация производительности 5
6.1 Техники оптимизации . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
6.2 Метрики производительности . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
7 Заключение 6
7.1 Анализ архитектуры . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6
7.2 Рекомендации по развитию . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
7.3 Выводы . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7
1
Техническая документация Версия 1.0
1 Введение
1.1 Общее описание
Данная техническая документация описывает архитектуру, алгоритмы и особенности реализации игры
```
Echo Step. Игра представляет собой 2D-платформер с механикой временных копий (эхо), разработанный
```
с использованием технологии вайбкодинга в WebSim.
1.2 Цели документации
Основные цели документации:
• Описание архитектуры системы и взаимодействия компонентов
• Детализация физических моделей и математических алгоритмов
• Спецификация форматов данных и структур уровней
• Описание алгоритмов работы эхо и триггерных систем
• Документирование отладочных инструментов и процедур тестирования
1.3 Область применения
Документация предназначена для:
• Разработчиков, поддерживающих и расширяющих функционал игры
• Тестировщиков, проверяющих корректность работы системы
• Аналитиков, изучающих архитектуру и алгоритмы
• Студентов, изучающих принципы описательного программирования
2 Архитектура системы
2.1 Общая структура
```
Игра Echo Step реализована как одностраничное веб-приложение (SPA) со следующей архитектурой:
```
Уровень Компоненты
Презентационный
HTML5 Canvas
CSS3 стили
WebGL рендеринг
Логический
Физический движок
Система управления
Менеджер уровней
Данные
Конфигурация уровней
Состояние игры
Сохранения
Рис. 1: Архитектурные уровни системы
2.2 Основные компоненты
Система состоит из следующих ключевых компонентов:
• GameEngine: Центральный компонент, управляющий жизненным циклом игры
• PhysicsManager: Реализация физики, коллизий и гравитации
• EchoSystem: Менеджер создания и управления эхо
• LevelManager: Загрузка и переключение уровней
• InputHandler: Обработка пользовательского ввода
• DebugSystem: Инструменты для отладки и тестирования
2
Техническая документация Версия 1.0
2.3 Диаграмма взаимодействия
1 +−−−−−−−−−−−−+ +−−−−−−−−−−−−−−+ +−−−−−−−−−−−−−+
2 | Input |−−−−>| GameEngine |<−−−>| LevelManager |
3 | Handler | | | | |
4 +−−−−−−−−−−−−+ +−−−−−−−−−−−−−−+ +−−−−−−−−−−−−−+
5 | |
6 v v
7 +−−−−−−−−−−−−+ +−−−−−−−−−−−−−−+
8 | DebugSystem | | PhysicsManager |
9 +−−−−−−−−−−−−+ +−−−−−−−−−−−−−−+
10 | |
11 v v
12 +−−−−−−−−−−−−+ +−−−−−−−−−−−−−−+
13 | EchoSystem |<−−−>| C o l l i s i o n S y s t e m |
14 +−−−−−−−−−−−−+ +−−−−−−−−−−−−−−+
Листинг 1: Схема взаимодействия компонентов
3 Физическая модель
3.1 Основные параметры
Физическая модель игры использует следующие параметры:
```
Fgravity = m × g (1)
```
где:
• Fgravity — сила гравитации
```
• m — масса объекта (по умолчанию 1 для всех объектов)
```
```
• g — ускорение свободного падения (g = 20 м/с2)
```
Параметры прыжка:
```
vjump = 8 м/с (2)
```
3.2 Модель движения
Горизонтальное движение описывается формулой:
```
x(t) = x0 + vx × t (3)
```
где:
```
• x(t) — позиция по оси X в момент времени t
```
• x0 — начальная позиция
```
• vx — горизонтальная скорость (vx = 5 м/с)
```
Вертикальное движение при прыжке:
```
y(t) = y0 + vjump × t − g × t
```
2
```
2 (4)
```
4 Отладочная система
4.1 Архитектура
Отладочная система реализована как отдельный модуль с минимальной связью с основной логикой:
3
Техническая документация Версия 1.0
```
DebugManager: Центральный компонент отладки
```
```
LevelSwitcher: Переключение уровней
```
```
ConsoleLogger: Логирование событий
```
4.2 Алгоритм переключения уровней
```
1 function handleDebugInput ( keyCode ) {
```
```
2 if (! debugMode . enabled ) return ;
```
3
```
4 switch ( keyCode ) {
```
5 case KEY_TILDE : // ‘
```
6 toggleDebugMode () ;
```
```
7 break ;
```
```
8 case KEY_1 : loadLevel (1) ; break ;
```
```
9 case KEY_2 : loadLevel (2) ; break ;
```
10 // ... other levels
```
11 case KEY_0 : loadLevel (10) ; break ;
```
```
12 }
```
```
13 }
```
14
```
15 function toggleDebugMode () {
```
```
16 debugMode . enabled = ! debugMode . enabled ;
```
```
17 if ( debugMode . enabled ) {
```
```
18 showDebugUI (" Debug Mode ON ") ;
```
```
19 } else {
```
```
20 hideDebugUI () ;
```
```
21 }
```
```
22 }
```
Листинг 2: Алгоритм переключения уровней в отладочном режиме
5 Процедуры тестирования
5.1 Функциональное тестирование
Для каждого уровня определены тестовые сценарии:
Таблица 1: Тестовые сценарии для Level 9
Сценарий Действия Ожидаемый ре-
зультат
Активация левого
триггера
Создать эхо, пролетаю-
щее через левый триггер
Левый триггер
становится зелё-
ным на 3 секунды
Активация обоих
триггеров
Создать два эхо для ак-
тивации обоих триггеров
Появляется плат-
```
форма в (20.0, 4.0)
```
Падение эхо Эхо активирует левый
триггер и начинает па-
дать
Эхо не достигает
правого триггера
Синхронная акти-
вация
Два эхо одновременно
активируют триггеры
Платформа появ-
ляется и остаётся
на 3 секунды
4
Техническая документация Версия 1.0
5.2 Стресс-тестирование
Проведены следующие стресс-тесты:
```
Тест 1: Непрерывное создание эхо (3 шт.) в течение 1 минуты
```
```
• Результат: FPS остаётся стабильным (60 кадров/сек)
```
• Потребление памяти: не превышает 100 МБ
Тест 2: Активация всех триггеров одновременно
• Результат: Все триггеры корректно обрабатывают активацию
• Время реакции: < 10 мс
```
Тест 3: Быстрое переключение уровней (1 → 10)
```
• Результат: Все уровни загружаются без ошибок
• Время загрузки: < 500 мс на уровень
6 Оптимизация производительности
6.1 Техники оптимизации
Для обеспечения производительности реализованы следующие техники:
Объектный пул для эхо и триггеров:
```
1 class EchoPool {
```
```
2 constructor ( maxSize = 10) {
```
```
3 this . pool = [];
```
```
4 this . maxSize = maxSize ;
```
```
5 }
```
6
```
7 getEcho () {
```
```
8 if ( this . pool . length > 0) {
```
```
9 return this . pool . pop () ;
```
```
10 }
```
```
11 return new Echo () ;
```
```
12 }
```
13
```
14 returnEcho ( echo ) {
```
```
15 if ( this . pool . length < this . maxSize ) {
```
```
16 this . pool . push ( echo ) ;
```
```
17 }
```
```
18 }
```
```
19 }
```
Листинг 3: Реализация объектного пула
Ленивая инициализация ресурсов:
```
1 class ResourceManager {
```
```
2 constructor () {
```
```
3 this . assets = {};
```
```
4 this . initialized = false ;
```
```
5 }
```
6
```
7 initWhenNeeded () {
```
```
8 if (! this . initialized && isPlayerNearResourceArea () ) {
```
```
9 this . loadAssets () ;
```
```
10 this . initialized = true ;
```
```
11 }
```
```
12 }
```
```
13 }
```
Листинг 4: Ленивая инициализация
5
Техническая документация Версия 1.0
Оптимизация коллизий через пространственное разделение:
```
1 class SpatialGrid {
```
```
2 constructor ( cellSize = 1.0) {
```
```
3 this . cellSize = cellSize ;
```
```
4 this . grid = {};
```
```
5 }
```
6
```
7 getCellPosition (x , y ) {
```
```
8 return {
```
```
9 x : Math . floor ( x / this . cellSize ) ,
```
```
10 y : Math . floor ( y / this . cellSize )
```
```
11 };
```
```
12 }
```
13
```
14 addObject ( object ) {
```
```
15 const cell = this . getCellPosition ( object .x , object . y ) ;
```
```
16 const key = ‘$ { cell . x } , $ { cell . y } ‘;
```
17
```
18 if (! this . grid [ key ]) {
```
```
19 this . grid [ key ] = [];
```
```
20 }
```
```
21 this . grid [ key ]. push ( object ) ;
```
```
22 }
```
23
```
24 getNearbyObjects (x , y , radius ) {
```
25 // Returns objects only from neighboring cells
```
26 }
```
```
27 }
```
Листинг 5: Пространственное разделение для коллизий
6.2 Метрики производительности
Результаты замеров производительности:
Таблица 2: Метрики производительности
Параметр Минимум Максимум
```
FPS (60 целевых) 58 62
```
Время загрузки уровня 200 мс 450 мс
Потребление памяти 75 МБ 95 МБ
Время отклика на ввод 8 мс 15 мс
Время обновления физики 10 мс 16 мс
7 Заключение
7.1 Анализ архитектуры
Представленная архитектура игры Echo Step демонстрирует следующие преимущества:
Модульность: чёткое разделение ответственности компонентов
Масштабируемость: лёгкое добавление новых уровней и механик
Производительность: оптимизация для работы на слабых устройствах
Отладочная поддержка: встроенные инструменты для тестирования
6
Техническая документация Версия 1.0
7.2 Рекомендации по развитию
Для дальнейшего развития системы рекомендуется:
Реализовать систему сохранений прогресса
Добавить редактор уровней на основе текущей архитектуры
Оптимизировать загрузку ресурсов через lazy loading
```
Добавить поддержку дополнительных устройств ввода (геймпад)
```
Реализовать сетевую игру через WebSockets
7.3 Выводы
Разработанная система полностью соответствует поставленным требованиям и демонстрирует эффек-
тивное применение принципов описательного программирования в WebSim. Архитектура обеспечивает
стабильную работу всех 10 уровней с минимальными требованиями к ресурсам.
7